#!/bin/bash

set -eo pipefail

function echo_err() {
	>&2 echo "$1"
}

if docker ps > /dev/null 2>&1; then
	container=$(docker ps | awk '{if (NR != 1) print $1 ": " $(NF)}' | fzf --height 40%)

	if [[ -n $container ]]; then
		container_id=$(echo "$container" | awk -F ': ' '{print $1}')

		docker exec -it "$container_id" /bin/bash || docker exec -it "$container_id" /bin/sh
	else
		echo_err "You have not selected any container"
		exit 1
	fi
else
	echo_err "Docker daemon is not running"
	exit 2
fi

